<!DOCTYPE html>
<html>
<head>
    <title>Redirection en cours</title>
    <script>
        function openLink() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            var isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

            var chromeQuery = 'googlechrome://g.page/r/CcN_-2m8sPZ0EB0/review';
            var appStoreURL = 'https://apps.apple.com/us/app/google-chrome/id535886823';
            var query = 'https://g.page/r/CcN_-2m8sPZ0EB0/review';

            if (isIOS) {
                // Essaye d'ouvrir Chrome sur iOS en utilisant une balise meta refresh
                var start = Date.now();
                var timeout = setTimeout(function() {
                    if (Date.now() - start < 1000) {
                        // Si le temps écoulé est inférieur à 1 seconde, Chrome n'est probablement pas installé
                        window.location = appStoreURL;
                    }
                }, 800); // délai de 0,8 seconde

                window.location = chromeQuery;

                // Redirige vers l'URL normale après un délai pour éviter l'erreur de Safari
                setTimeout(function() {
                    if (Date.now() - start < 1500) {
                        window.location = query;
                    }
                }, 1500); // Délai de 1,5 secondes
            } else {
                // Pour les autres plateformes
                window.location = query;
            }
        }
    </script>
</head>
<body onload="openLink()">
    <p>Redirection en cours...</p>
</body>
</html>
